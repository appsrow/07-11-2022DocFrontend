<div class="container" *ngIf="isPasswordCorrect">
    <div class="row mt-3">
        <div class="col-12 col-sm-4 d-flex align-items-center">
            <a href="#">
                <img src="/assets/images/logo.svg" alt="Logo" class="logo">
            </a>
        </div>
        <div class="col-8 col-sm-5 d-flex align-items-center justify-content-start justify-content-md-center">
            <h4 class="text-center camp_name"> {{ 'ambassador.streamersProgress' | translate }}</h4>
        </div>
        <div class="col-4 col-sm-3 d-flex align-items-center justify-content-end">
            <div class="form-group mb-0">
                <ul class="language-ul m-0 justify-content-end">
                    <li class="nav-item language-main">
                        <a class="nav-link" [class.active]="switchLanguage=='es'" (click)="selectLanguage('es')">ES</a>
                        <a class="nav-link" [class.active]="switchLanguage==''" (click)="selectLanguage('en')">EN</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="background-primary my-3 br-10 w-100 p-3 pb-0 p-md-4 ">
        <div class="row">
            <div class="col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4 statis_head" *ngIf="campaignDetails">
                <h3 class="section-head">
                    <img *ngIf="campaignDetails.campaign_type_name == 'uploadvideo'"
                        src="../../../../assets/images/icon_video.png" alt="Video icon">
                    <img *ngIf="campaignDetails.campaign_type_name == 'Lead'" src="../../../../assets/images/lead.png"
                        alt="Lead icon">
                    <img *ngIf="campaignDetails.campaign_type_name == 'Follow'"
                        src="../../../../assets/images/icon_follow.png" alt="Follow icon">
                    <img *ngIf="campaignDetails.campaign_type_name == 'Appsdownload'"
                        src="../../../../assets/images/icon_download.png" alt="Download icon">
                    <img *ngIf="campaignDetails.campaign_type_name == 'clicksonthewebsite'"
                        src="../../../../assets/images/icon_visit.png" alt="Website icon">
                    {{ campaignDetails.campaign_name }}
                </h3>
                <p>({{campaignDetails.start_date | date:'dd-MM-yyyy'}} To {{campaignDetails.end_date |
                    date:'dd-MM-yyyy'}})</p>

            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-8 col-xl-8 statis_datepicker mt-2">
                <form class="row">
                    <div class="col-12 col-md-6 col-lg-6">
                        <div class="form-group date-picker">
                            <angular2-multiselect *ngIf="chartTypeList" [data]="chartTypeList"
                                [settings]="chartTypeSettings" [(ngModel)]="chartType" name="chartType"
                                (onSelect)="onChangeType($event)">
                            </angular2-multiselect>
                            <label class="lbl-input">{{ 'brandStatistics.selectChartType' | translate }} <span
                                    class="text-danger">*</span></label>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-6" *ngIf="showDatePickerType === 'week'">
                        <div class="form-group date-picker">
                            <ng2-flatpickr id="statistics-date" [config]="weekPickerOptions"></ng2-flatpickr>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-6" *ngIf="showDatePickerType === 'month'">
                        <div class="form-group date-picker">
                            <mat-form-field>
                                <input matInput [matDatepicker]="dp" placeholder="Month and Year"
                                    [(ngModel)]="monthYearDate" name="monthYearDate">
                                <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                                <mat-datepicker #dp startView="multi-year" (yearSelected)="chosenYearHandler($event)"
                                    (monthSelected)="chosenMonthHandler($event, dp)" panelClass="example-month-picker">
                                </mat-datepicker>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-6" *ngIf="showDatePickerType === 'year'">
                        <div class="form-group date-picker">
                            <mat-form-field>
                                <input matInput [matDatepicker]="picker" [(ngModel)]="year" name="year" hidden="true"
                                    [readonly]="true" />
                                <input matInput [ngModel]="year | date : 'yyyy'" [readonly]="true" name="year" />
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker startView="multi-year"
                                    (yearSelected)="chosenYear($event, picker)">
                                </mat-datepicker>
                            </mat-form-field>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="statis_graph" *ngIf="saleDataMulti.length>0">
            <div class="chart_legend">
                <div class="own_subs">
                    <span></span>
                    {{ 'ambassador.own_subs' | translate }}
                </div>
                <div class="other_subs">
                    <span></span>
                    {{ 'ambassador.other_subs' | translate }}
                </div>
                <div class="other_rewards">
                    <span></span>
                    {{ 'ambassador.other_rewards' | translate }}
                </div>
            </div>
            <ngx-charts-bar-vertical-2d [view]="view" [results]="saleDataMulti" [scheme]="colorScheme"
                [schemeType]="schemeType" [showXAxisLabel]="true" [showYAxisLabel]="true" [xAxis]="true" [yAxis]="true">
            </ngx-charts-bar-vertical-2d>
        </div>
        <div *ngIf="saleDataMulti.length === 0" style="text-align: center; margin: 20px 0 30px;">
            {{'shared.statiscsNoData' | translate}} {{ selectedWeekDates[0].dates ? selectedWeekDates[0].dates : ''}}
            {{'shared.to' | translate}}
            {{selectedWeekDates ? selectedWeekDates[6].dates : ''}}</div>
        <div class="row" *ngIf="saleData.length>0">
            <div class="">
                <div class="total_graph">
                    <h5 class="heading-green">{{ 'brandStatistics.totalTargetVsTotalAchieved' | translate }}</h5>
                    <div class="total_graph_inner">
                        <ngx-charts-pie-chart [results]="saleData" [legend]="true" [legendTitle]="'Streamers progress'"
                            [view]="[1000,300]" [legendPosition]="'below'" [scheme]="colorScheme" [labels]="true">
                        </ngx-charts-pie-chart>
                        <div class="total_chart">
                            <h6> {{ 'ambassador.own_subs' | translate }}
                                <span>{{ percentageData.own_subs }} %</span>
                            </h6>
                            <h6>{{ 'ambassador.other_subs' | translate }}
                                <span>{{ percentageData.other_subs }} %</span>
                            </h6>
                            <h6>{{ 'ambassador.other_rewards' | translate }}
                                <span>{{ percentageData.other_rewards }} %</span>
                            </h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #content let-modal>
    <div class="modal-header head_with_name pb-4 px-0">
        <h5 class="modal-title mb-0" id="modal-basic-title">Enter the password to view campaign metrics</h5>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body p-0">
        <form [formGroup]="confirmPasswordForm">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group m-0 verification_input">
                        <label class="lbl-popup-input mb-2">Please enter your file password<span
                                class="text-danger error-msg">*</span></label>
                        <input type="text" maxlength="15" formControlName="password" class="form-control"
                            (keyup.enter)="checkLinkAndPassword()">
                        <div
                            *ngIf="confirmPasswordForm.controls['password'].errors && (confirmPasswordForm.controls['password'].dirty || confirmPasswordForm.controls['password'].touched) || submittedPassword">
                            <div *ngIf="confirmPasswordForm.controls['password'].errors?.required"
                                class="text-danger text-start">Password is required</div>
                            <div *ngIf="confirmPasswordForm.controls['password'].errors?.minlength"
                                class="text-danger text-start">Password should be minimum 6 characters
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-center align-items-center flex-column mt-3">
                        <button type="button" (click)="checkLinkAndPassword()" class="btn btn-green">{{ 'shared.verify'
                            | translate }}</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</ng-template>